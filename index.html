<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>REDACORE IA</title>
  <style>
    :root {
      --glass: rgba(20, 30, 60, 0.45);
      --glass-border: rgba(80, 170, 255, 0.28);
      --accent: #00eaff;
      --text: #fbffff;
      --text-soft: #b0d0ff;
      --bg-start: #060b1c;
      --bg-end: #14263f;
    }

    * { margin:0; padding:0; box-sizing:border-box; }

    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: linear-gradient(135deg, var(--bg-start), var(--bg-end));
      background-size: 300% 300%;
      animation: gradient 30s ease infinite;
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      padding: 8px;
    }

    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

    .container {
      background: var(--glass);
      backdrop-filter: blur(28px);
      border: 1px solid var(--glass-border);
      border-radius: 24px;
      box-shadow: 0 8px 40px rgba(0,0,0,0.6);
      flex: 1;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      margin: 0 auto;
      width: 100%;
      max-width: 1100px;
    }

    header {
      padding: 20px 16px 12px;
      text-align: center;
    }

    h1 {
      font-size: clamp(2.4rem, 9vw, 3.6rem);
      font-weight: 900;
      background: linear-gradient(90deg, #fff, var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle { color: var(--text-soft); font-size: 1.05rem; margin-top: 4px; }

    .content {
      padding: 16px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    label { font-weight: 600; color: #e0f0ff; margin-bottom: 6px; display: block; }

    input, select {
      width: 100%;
      background: rgba(255,255,255,0.08);
      border: 1px solid var(--glass-border);
      border-radius: 14px;
      padding: 14px;
      color: white;
      font-size: 1.05rem;
    }

    input:focus, select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px rgba(0,234,255,0.2);
      outline: none;
    }

    #gerarBtn {
      width: 100%;
      background: linear-gradient(90deg, var(--accent), #00c0ff);
      color: #000;
      font-weight: 800;
      font-size: 1.3rem;
      padding: 18px;
      border: none;
      border-radius: 18px;
      cursor: pointer;
      margin-top: 24px;
    }

    #resultado {
      flex: 1;
      background: rgba(10, 15, 35, 0.6);
      border: 1px solid var(--glass-border);
      border-radius: 18px;
      padding: 28px;
      font-size: 1.15rem;
      line-height: 1.95;
      text-align: justify;
      white-space: pre-line;
      overflow-y: auto;
      margin-top: 24px;
    }

    #copyBtn {
      background: var(--accent);
      color: #000;
      border: none;
      padding: 12px 28px;
      border-radius: 14px;
      font-weight: 700;
      cursor: pointer;
      display: none;
      margin-top: 12px;
    }

    .error {
      background: rgba(255,80,80,0.25);
      border: 1px solid #ff8888;
      color: #ffdddd;
      padding: 16px;
      border-radius: 14px;
      margin-top: 16px;
      display:none;
    }

    footer {
      text-align: center;
      padding: 12px;
      color: #7080b0;
      font-size: 0.9rem;
    }
  </style>
</head>
<body>

<div class="container">
  <header>
    <h1>REDACORE IA</h1>
    <p class="subtitle">alimentado por S.A.R IA</p>
  </header>

  <div class="content">

    <form id="redacaoForm">
      <label for="tema">Tema da redação</label>
      <input type="text" id="tema" required>

      <button type="submit" id="gerarBtn">Gerar Redação</button>
    </form>

    <div id="resultado"></div>
    <button id="copyBtn">Copiar Redação</button>
    <div id="error" class="error"></div>

  </div>

  <footer>fornecida por Evolution Studio</footer>
</div>

<script>
const API_KEY_ROT13 = "tfx_BELYmVDqNaHufO5RvkgpJTqlo3SLuJz6wsIMUvldqxvzvaEHOz5V";

function rot13(str) {
  return str.replace(/[a-zA-Z]/g, c => {
    const code = c.charCodeAt(0);
    return String.fromCharCode(((code <= 90 ? 90 : 122) >= (code + 13) ? code + 13 : code + 13 - 26));
  });
}

const API_KEY = rot13(API_KEY_ROT13.trim());

const form = document.getElementById('redacaoForm');
const resultado = document.getElementById('resultado');
const copyBtn = document.getElementById('copyBtn');
const errorDiv = document.getElementById('error');

copyBtn.addEventListener('click', () => {
  navigator.clipboard.writeText(resultado.innerText);
  copyBtn.textContent = "Copiado!";
  setTimeout(()=> copyBtn.textContent="Copiar Redação",2000);
});

form.addEventListener('submit', async e => {
  e.preventDefault();
  const tema = document.getElementById('tema').value.trim();
  if(!tema) return;

  resultado.innerHTML="";
  errorDiv.style.display="none";
  copyBtn.style.display="none";

  const system = `
Você é um estudante brasileiro extremamente bem preparado.
Escreva como um ser humano real.
Evite linguagem robótica.
Use conectivos naturais.
Varie o tamanho das frases.
Seja fluido, crítico e convincente.
Nada de frases mecânicas ou padrão artificial.
`;

  const user = `
Escreva uma redação dissertativa-argumentativa estilo ENEM sobre:
${tema}

Estrutura:
- Introdução contextualizada
- 2 parágrafos argumentativos bem desenvolvidos
- Conclusão com proposta de intervenção detalhada

Seja humano, natural e sofisticado.
`;

  try{
    const res = await fetch("https://api.groq.com/openai/v1/chat/completions",{
      method:"POST",
      headers:{
        "Authorization":`Bearer ${API_KEY}`,
        "Content-Type":"application/json"
      },
      body:JSON.stringify({
        model:"llama-3.3-70b-versatile",
        messages:[
          {role:"system",content:system},
          {role:"user",content:user}
        ],
        temperature:0.9,
        max_tokens:2500
      })
    });

    if(!res.ok){
      throw new Error("Falha na conexão com a S.A.R");
    }

    const data = await res.json();
    let texto = data.choices[0].message.content.trim();

    texto = texto.replace(/\n{3,}/g,"\n\n").trim();

    const paragrafos = texto.split(/\n{2,}/)
      .map(p=>`<p>${p.trim()}</p>`)
      .join("");

    resultado.innerHTML = paragrafos;

    copyBtn.style.display="inline-block";

  }catch(err){
    errorDiv.textContent="Erro: "+err.message;
    errorDiv.style.display="block";
  }
});
</script>
</body>
</html>
